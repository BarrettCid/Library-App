<style>
    span.material-symbols-outlined {
      font-variation-settings:
      'FILL' 1,
      'wght' 400,
      'GRAD' 0,
      'opsz' 24
    }
</style>
<div class="review-container">
    <div class="create-review">
        <mat-accordion>
            <mat-expansion-panel hideToggle>
                <mat-expansion-panel-header>
                  <mat-panel-title> Add Review</mat-panel-title>
                </mat-expansion-panel-header>
                <form class="flex flex-column" [formGroup]="formGroup">
                    <div>
                        <ul class="rating-list" *ngFor="let star of stars">
                            <li (click)="countStars(star)" [ngClass]="{'selected': (star <= selectedStar)}">
                                <span class="material-symbols-outlined">
                                    star
                                </span>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <mat-form-field class="flex-item" appearance="fill">
                            <mat-label>Review</mat-label>
                            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="5" formControlName="review" placeholder="review" class="form-input"></textarea>
                        </mat-form-field>
                        <mat-error>
                            <small *ngIf="formGroup.get('review')!.touched && formGroup.get('review')!.errors">
                            You must enter a review!
                            </small>
                        </mat-error>
                    </div>
                    <div class="flex">
                        <button type="button" [disabled]="!formGroup.valid" mat-stroked-button class="form confirm-button" (click)="addReview()">Submit</button>
                    </div>
                </form>
              </mat-expansion-panel>
        </mat-accordion>
    </div>
    <div class="reviews">
        <mat-accordion>
            <mat-expansion-panel hideToggle>
                <mat-expansion-panel-header>
                  <mat-panel-title>Reviews</mat-panel-title>
                </mat-expansion-panel-header>
                <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
                
                    <ng-container matColumnDef="reviewer">
                        <th mat-header-cell *matHeaderCellDef >Reviewer</th>
                        <td mat-cell *matCellDef="let review">{{review.reviewer}}</td>
                    </ng-container> 
                    <ng-container matColumnDef="review">
                        <th mat-header-cell *matHeaderCellDef >Review</th>
                        <td mat-cell *matCellDef="let review">{{review.reviewText}}</td>
                    </ng-container>
                    <ng-container matColumnDef="rating">
                        <th mat-header-cell *matHeaderCellDef >Rating</th>
                        <td mat-cell *matCellDef="let review">{{review.rating}} <span class="material-symbols-outlined reviewed"> star </span></td>
                    </ng-container>
                    
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row
                    *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
                <mat-paginator [pageSizeOptions]="[10, 25, 50]"
                 showFirstLastButtons
                 aria-label="Select page of reviews">
                </mat-paginator>         
            </mat-expansion-panel>
        </mat-accordion>
        
    </div>
</div>
